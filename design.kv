<WelcomeScreen>:
    Label:
        text: "welcome"
        halign: "center"
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: ''

    GridLayout:
        cols: 3
        pos: 0,-555
        Button:
            text: '1'
            size_hint_y: None
            height: dp(40)
        Button:
            text: 'Scan'
            size_hint_y: None
            height: dp(40)
            on_release: root.to_scanning()
        Button:
            text: '3'
            size_hint_y: None
            height: dp(40)

<ScanningScreen>:
#:import ZBarCam kivy_garden.zbarcam.ZBarCam
    BoxLayout:
        orientation: 'vertical'
        ZBarCam:
            id: zbarcam
            AnchorLayout:
                anchor_x: 'left'
                anchor_y: 'top'
                Button:
                    text: 'Back'
                    size_hint: None, None
                    on_press: root.ids.zbarcam.ids.xcamera.play=False
                    on_release: root.to_mainpage()
            AnchorLayout:
                anchor_x: 'right'
                anchor_y: 'bottom'
                Button:
                    text: 'Finish'
                    size_hint: None, None
                    on_release: root.to_signature()
        Label:
            id: reading_scan
            size_hint: None, None
            size: self.texture_size[0], 50
            text: ', '.join([str(symbol.data) for symbol in zbarcam.symbols])
            on_text: root.readScan()

<SignatureScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'ลายเซ็นผู้ส่ง'
            size: self.texture_size[0], 50
            pos_hint: {'left' : 1}
    Widget:
        canvas:
            Ellipse:
                def on_touch_down(self, touch):
                    with self.canvas:
                        Color(1, 1, 0)
                        d = 30.
                        Ellipse(pos=(touch.x - d / 2, touch.y - d / 2), size=(d, d))
                        touch.ud['line'] = Line(points=(touch.x, touch.y))
                
<RootWidget>:
    WelcomeScreen:
        name: 'welcome_screen'
    ScanningScreen:
        name: 'scanning_screen'
    SignatureScreen:
        name: 'signature_screen'
    